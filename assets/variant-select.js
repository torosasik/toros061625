window.Eurus.loadedScript.includes("variant-select.js")||(window.Eurus.loadedScript.push("variant-select.js"),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.data("xVariantSelect",((t,e,i,n,a,r,d,s,c,o)=>({variants:null,currentVariant:{},options:[],currentAvailableOptions:[],cachedResults:[],quickViewSectionId:"quick-view",handleSectionId:t,paramVariant:!1,init(){this.variants=JSON.parse(this.$el.querySelector('[type="application/json"]').textContent),d&&(this.handleSectionId="choose-option"),s&&(this.handleSectionId=c),document.addEventListener("eurus:cart:items-changed",(()=>{this.cachedResults=[],Alpine.store("xUpdateVariantQuanity").updateQuantity(t,n,this.currentVariant?.id)})),this.$watch("options",(()=>{this._updateVariantSelector()}))},initMedia(){this._updateMasterId(),this._updateMultiMediaWithVariant(),this._updateMedia()},_updateVariantSelector(){if(this._updateMasterId(),this._updateVariantStatuses(),!this.currentVariant)return this._dispatchUpdateVariant(),void this._setUnavailable();o!=this.currentVariant.id&&(this.paramVariant=!0),e&&this.paramVariant&&window.history.replaceState({},"",`?variant=${this.currentVariant.id}`),""!=d||e||this.updateImageVariant(),this._updateVariantInput(),r?this._updateMedia():"complete"!==document.readyState||t.includes(this.quickViewSectionId)||this._updateMedia(),this._updateProductForms(),this._setAvailable(),Alpine.store("xPickupAvailable").updatePickUp(t,this.currentVariant.id);const i=t+"-"+this.currentVariant.id;if(this.cachedResults[i]){const e=this.cachedResults[i];this._renderPriceProduct(e),this._renderSkuProduct(e),this._renderProductBadges(e),this._renderInventoryStatus(e),this._renderBuyButtons(e),this._setMessagePreOrder(e),this._setEstimateDelivery(e),this._setCartEstimateDelivery(e),this._setBackInStockAlert(e),this._setPickupPreOrder(e),this._dispatchUpdateVariant(),this._dispatchVariantSelected(e),Alpine.store("xUpdateVariantQuanity").render(e,t)}else{const e=this.currentVariant.id;fetch(`${n}?variant=${e}&section_id=${this.handleSectionId}`).then((t=>t.text())).then((n=>{const r=(new DOMParser).parseFromString(n,"text/html");this.currentVariant&&e==this.currentVariant.id&&r.getElementById(`x-product-template-${a}-${t}`)?(this._renderPriceProduct(r),this._renderSkuProduct(r),this._renderProductBadges(r),this._renderInventoryStatus(r),this._renderBuyButtons(r),this._setMessagePreOrder(r),this._setEstimateDelivery(r),this._setPickupPreOrder(r),this._setCartEstimateDelivery(r),this._setBackInStockAlert(r),Alpine.store("xUpdateVariantQuanity").render(r,t),this.cachedResults[i]=r,this._dispatchUpdateVariant(r),this._dispatchVariantSelected(r)):this.currentVariant&&e==this.currentVariant.id&&this._dispatchUpdateVariant(r)}))}},_dispatchVariantSelected(e){document.dispatchEvent(new CustomEvent(`eurus:product-page-variant-select:updated:${t}`,{detail:{currentVariantStatus:this.currentVariant.available,currentAvailableOptions:this.currentAvailableOptions,options:this.options,html:e}}))},_updateVariantStatuses(){const t=this.variants.filter((t=>this.options[0]===this._decodeOptionValue(t.option1)));this.options.forEach(((e,i)=>{if(this.currentAvailableOptions[i]=[],0===i)return;const n=this.options[i-1];t.forEach((t=>{t.available&&this._decodeOptionValue(t[`option${i}`])===n&&this.currentAvailableOptions[i].push(this._decodeOptionValue(t[`option${i+1}`]))}))}))},_decodeOptionValue(t){if(t)return t.replaceAll("\\/","/")},_renderInventoryStatus(e){const i=document.getElementById("block-inventory-"+t),n=e.getElementById("block-inventory-"+t);n&&i&&(i.innerHTML=n.innerHTML)},_updateMedia(){if(!d&&!s){let e=document.getElementById("x-product-"+t),i="",n="",a="";this.currentVariant&&null!=this.currentVariant.featured_media?(i=document.getElementsByClassName(this.currentVariant.featured_media.id+"-"+t),n=parseInt(i[0].getAttribute("index")),a=document.getElementById("postion-image-"+t+"-"+this.currentVariant.featured_media.id)):(i=e.querySelector(".featured-image"),n=parseInt(i.getAttribute("index")),a=document.querySelector(`#stacked-${t} .featured-image`));let r=document.getElementById("product-media-"+t).dataset.mediaWithVariantSelected;if(e&&!r&&(e.splide&&i?e.splide.go(n):document.addEventListener(`eurus:media-gallery-ready:${t}`,(()=>{e.splide&&e.splide.go(n)}))),!a)return;if(!r){document.getElementById("stacked-"+t).prepend(a)}}},validateOption(){const e=document.querySelector(`#shopify-section-${t} [data-media-option]`);e&&(this.mediaOption=e.dataset.mediaOption)},_updateMultiMediaWithVariant(){if(this.validateOption(),!this.mediaOption||!this.currentVariant)return;const e=document.querySelector(`#shopify-section-${t} [data-option-name="${this.mediaOption}"]`),i=e&&e.dataset.optionIndex,n=this.handleText(this.currentVariant.options[i]);var a=this.mediaOption+"-"+n;this.optionIndex=i;const r=document.querySelectorAll(`#ProductModal-${t} [data-media-type="${a}"], #shopify-section-${t} [data-media-type="${a}"]`);if(!r.length)return document.querySelectorAll(`#ProductModal-${t} [data-media-type], #shopify-section-${t} [data-media-type]`).forEach((function(t){t.classList.add("media_active"),t.classList.add("splide__slide")})),void document.dispatchEvent(new CustomEvent("reload-thumbnail-"+t));document.querySelectorAll(`#shopify-section-${t} [data-media-type], #ProductModal-${t} [data-media-type]`).forEach((function(t){t.classList.remove("media_active"),t.classList.remove("splide__slide")})),Array.from(r).reverse().forEach((function(t,e){t.classList.add("media_active"),t.classList.contains("media-slide")&&t.classList.add("splide__slide");let i=t.parentElement;i.firstChild!=t&&i.prepend(t)})),this.optionConnect!=a&&document.dispatchEvent(new CustomEvent("reload-thumbnail-"+t)),this.optionConnect=a},handleText(t){if(t)return t.toString().replace("ı","i").replace("ß","ss").normalize("NFD").replace("-"," ").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"-")},goToFirstSlide(){let e=document.getElementById("x-product-"+t),i=document.getElementById("product-media-"+t).dataset.mediaWithVariantSelected;e&&i&&e.splide&&this.currentVariant&&null!=this.currentVariant.featured_image&&e.splide.go(0);let n=document.querySelector(`#stacked-${t} .featured-image`),a=document.getElementById("stacked-"+t);a&&a.prepend(n)},_updateMasterId(){this.currentVariant=this.variants.find((t=>!t.options.map(((t,e)=>this.options[e]===t.replaceAll("\\/","/"))).includes(!1)))},_updateVariantInput(){document.querySelectorAll(`#product-form-${t}, #product-form-installment-${t}, #product-form-sticky-${t}`).forEach((t=>{const e=t.querySelector('input[name="id"]');e&&(e.value=this.currentVariant.id,e.dispatchEvent(new Event("change",{bubbles:!0})))}))},_updateProductForms(){document.querySelectorAll(`#product-form-${t}, #product-form-installment-${t}, #product-form-sticky-${t}`).forEach((t=>{const e=t.querySelector('input[name="id"]');e&&(e.value=this.currentVariant.id,e.dispatchEvent(new Event("change",{bubbles:!0})))}))},_renderPriceProduct(e){const i=document.getElementById("price-"+t),n=e.getElementById("price-"+t);n&&i&&(i.innerHTML=n.innerHTML)},_renderSkuProduct(e){const i=document.getElementById("sku-"+t),n=e.getElementById("sku-"+t);n&&i&&(i.innerHTML=n.innerHTML)},_renderProductBadges(e){const i=document.getElementById("x-badges-"+t),n=e.getElementById("x-badges-"+t);n&&i&&(i.innerHTML+=n.innerHTML)},_renderBuyButtons(e){const i=document.querySelectorAll(`#product-form-${t}, #product-form-installment-${t}, #product-form-sticky-${t}`),n=e.getElementById("x-atc-button-"+t);i.forEach((i=>{const a=i.querySelector(".add_to_cart_button");a&&(n&&a&&(a.innerHTML=n.innerHTML),this.currentVariant.available?e.getElementById("form-gift-card-"+t)&&document.getElementById("Recipient-checkbox-"+t).checked&&a.disabled?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled"):a.setAttribute("disabled","disabled"))}));const a=document.getElementById("x-payment-button-"+t),r=e.getElementById("x-payment-button-"+t);r&&a&&(r.classList.contains("hidden")?a.classList.add("hidden"):a.classList.remove("hidden"))},_setMessagePreOrder(e){const i=document.querySelector(`.pre-order-${t}`);if(!i)return;i.classList.add("hidden");const n=e.getElementById(`pre-order-${t}`);n&&(i.classList.remove("hidden"),i.innerHTML=n.innerHTML)},_setEstimateDelivery(e){const i=document.getElementById(`x-estimate-delivery-${t}`);if(!i)return;e.getElementById(`x-estimate-delivery-${t}`).classList.contains("disable-estimate")?i.classList.add("hidden"):i.classList.remove("hidden")},_setCartEstimateDelivery(e){const i=document.getElementById(`cart-edt-${t}`),n=e.getElementById(`cart-edt-${t}`);i&&n&&(i.innerHTML=n.innerHTML)},_setBackInStockAlert(e){const i=document.getElementById(`back_in_stock_alert-${t}`),n=e.getElementById(`back_in_stock_alert-${t}`);n&&i&&(i.innerHTML=n.innerHTML)},_setPickupPreOrder(e){const i=document.getElementById(`pickup-pre-order-${t}`);if(!i)return;e.getElementById(`pickup-pre-order-${t}`).classList.contains("disable-pickup")?i.classList.add("hidden"):i.classList.remove("hidden")},_setUnavailable(){const e=document.getElementById("price-"+t);e&&e.classList.add("hidden");const i=document.getElementById(`price-sticky-${t}`);i&&i.classList.add("hidden");const n=document.getElementById("block-inventory-"+t);n&&n.classList.add("hidden");const a=document.getElementById("x-badges-"+t);a&&a.classList.add("hidden");const r=document.getElementById("pickup-"+t);r&&r.classList.add("hidden");const d=document.getElementById("x-quantity-"+t);d&&d.classList.add("unavailable");const s=document.querySelector(`.pre-order-${t}`);s&&s.classList.add("hidden"),this._setBuyButtonUnavailable()},_setAvailable(){const e=document.getElementById("price-"+t);e&&e.classList.remove("hidden");const i=document.getElementById("block-inventory-"+t);i&&i.classList.remove("hidden");const n=document.getElementById("x-badges-"+t);n&&n.classList.remove("hidden");const a=document.getElementById("pickup-"+t);a&&a.classList.remove("hidden");const r=document.getElementById("x-quantity-"+t);r&&r.classList.remove("unavailable")},_setBuyButtonUnavailable(){document.querySelectorAll(`#product-form-${t},  #product-form-sticky-${t}`).forEach((t=>{const e=t.querySelector(".add_to_cart_button");if(!e)return;e.setAttribute("disabled","disabled");const n=e.querySelector(".x-atc-text");n&&(n.textContent=i)}))},_dispatchUpdateVariant(e=""){document.dispatchEvent(new CustomEvent(`eurus:product-card-variant-select:updated:${t}`,{detail:{currentVariant:this.currentVariant,currentAvailableOptions:this.currentAvailableOptions,options:this.options,html:e}}))},updateImageVariant(){if(null!=this.currentVariant){let t="";null!=this.currentVariant.featured_image&&(t=this.currentVariant.featured_image.src),Alpine.store("xPreviewColorSwatch").updateImage(this.$el,n,t,this.currentVariant.id)}}})))}))})),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.data("xStickyATC",(t=>({openDetailOnMobile:!1,currentAvailableOptions:[],options:[],init(){this.variants=xParseJSON(this.$el.getAttribute("x-variants-data")),document.addEventListener("eurus:product-page-variant-select:updated",(t=>{this.currentAvailableOptions=t.detail.currentAvailableOptions,this.options=t.detail.options,this.renderProductPrice(t.detail.html),this.renderMedia(t.detail.html)}))},renderProductPrice(e){document.querySelectorAll(`.price-sticky-${t}`).forEach((i=>{const n=e.getElementById("price-sticky-"+t);n&&i&&(i.innerHTML=n.innerHTML)}))},renderMedia(e){const i=document.getElementById("product-image-sticky-"+t),n=e.getElementById("product-image-sticky-"+t);n&&i&&(i.innerHTML=n.innerHTML)}})))}))})),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.store("xPickupAvailable",{updatePickUp(t,e){const i=document.getElementsByClassName("pick-up-"+t)[0];i&&fetch(window.Shopify.routes.root+`variants/${e}/?section_id=pickup-availability`).then((t=>t.text())).then((t=>{const e=(new DOMParser).parseFromString(t,"text/html").querySelector(".shopify-section");i.innerHTML=e.innerHTML})).catch((t=>{console.error(t)}))}})}))})),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.store("xUpdateVariantQuanity",{updateQuantity(t,e,i){if(!document.getElementById("x-quantity-"+t))return;fetch(i?`${e}?variant=${i}&section_id=${t}`:`${e}?section_id=${t}`).then((t=>t.text())).then((e=>{let i=(new DOMParser).parseFromString(e,"text/html");this.render(i,t)}))},render(t,e){const i=document.getElementById("x-quantity-"+e),n=t.getElementById("x-quantity-"+e);n&&i&&(i.innerHTML=n.innerHTML)}})}))})));
