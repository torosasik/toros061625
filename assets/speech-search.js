window.Eurus.loadedScript.includes("speech-search.js")||(window.Eurus.loadedScript.push("speech-search.js"),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.data("xSpeechSearch",(e=>({recognition:null,isListening:!1,searchInput:null,searchBtn:null,show:!1,init(){const i=window.navigator.userAgent.toLowerCase();if("webkitSpeechRecognition"in window&&i.indexOf("chrome")>-1&&window.chrome&&-1===i.indexOf("edg/")){this.show=!0,this.recognition=new window.webkitSpeechRecognition,this.recognition.continuous=!1,this.recognition.interimResults=!0;const i=e.closest("form");this.searchInput=i.querySelector(".input-search"),this.searchBtn=i.querySelector(".btn-search"),this.bindEvents()}else this.show=!1},bindEvents(){this.recognition.addEventListener("result",(i=>{if(i.results){const t=i.results[0][0].transcript;this.searchInput.value=t,this.searchInput.dispatchEvent(new Event("keyup")),e.blur(),this.searchBtn.focus()}})),this.recognition.addEventListener("audiostart",(()=>{this.isListening=!0,e.classList.add("search__speech-listening")})),this.recognition.addEventListener("audioend",(()=>{this.isListening=!1,e.classList.remove("search__speech-listening")})),e.addEventListener("click",(e=>this.toggleListen(e)))},toggleListen(e){e.preventDefault(),this.isListening?this.recognition.stop():this.recognition.start()}})))}))})));
