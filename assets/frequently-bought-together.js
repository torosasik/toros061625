window.Eurus.loadedScript.includes("frequently-bought-together.js")||(window.Eurus.loadedScript.push("frequently-bought-together.js"),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.data("xProductFrequently",(t=>({show:!1,products:"",productsList:[],productsListDraft:[],loading:!1,addToCartButton:"",errorMessage:!1,isSelectItems:!1,init(){this.$watch("productsListDraft",(()=>{this.productsList===this.productsListDraft?this.isSelectItems=!1:this.isSelectItems=!0,document.dispatchEvent(new CustomEvent(`eurus:product-fbt:productsList-changed-${t}`,{detail:{productsList:this.productsListDraft}}))}))},openPopup(){this.show=!0,Alpine.store("xPopup").open=!0},closePopup(){this.show=!1,Alpine.store("xPopup").open=!1},addToListDraft(t,e,r,s,i){let o=JSON.parse(JSON.stringify(this.productsListDraft));const n=t.closest(".x-product-fbt-data").querySelector(".product-name").textContent,u=JSON.parse(t.closest(".x-product-fbt-data").querySelector(".current-variant").textContent),d=!s&&JSON.parse(t.closest(".x-product-fbt-data").querySelector(".current-price").textContent),a=u.featured_image?u.featured_image.src:t.closest(".x-product-fbt-data").querySelector(".featured-image").textContent;let c=parseInt(t.closest(".x-product-fbt-data").querySelector(".current-quantity").value);"plus"==i&&(c+=1),"minus"==i&&(c-=1);let p=s?u.id:u,l=[],h=s?{...u,title:u.title.replaceAll("\\",""),product_id:e,product_name:n,productUrl:`${r}?variant=${u.id}`,featured_image:a,quantity:c}:{id:p,product_id:e,product_name:n,productUrl:r,featured_image:a,quantity:c,price:d};o=o.filter((t=>t.id!==p)),l=[...o,h],l=l.filter((t=>t.quantity>0)),this.productsListDraft=l,this.errorMessage=!1},addToList(t){this.productsList=this.productsListDraft,this.closePopup(t)},handleAddToCart(t){let e=JSON.parse(JSON.stringify(this.productsList));this.loading=!0,fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e,sections:Alpine.store("xCartHelper").getSectionsToRender().map((t=>t.id))})}).then((t=>t.json())).then((e=>{if("422"==e.status){const r=t.closest(".list-items").querySelector(".cart-warning");return this.errorMessage=!0,void(r&&(r.textContent=e.description))}this.errorMessage=!1,Alpine.store("xCartHelper").getSectionsToRender().forEach((t=>{const r=document.querySelector(t.selector);r&&e.sections[t.id]&&(r.innerHTML=getSectionInnerHTML(e.sections[t.id],t.selector))})),Alpine.store("xQuickView")&&Alpine.store("xQuickView").show&&(Alpine.store("xQuickView").show=!1),Alpine.store("xPopup").open=!1,Alpine.store("xMiniCart").openCart(),Alpine.store("xCartHelper").currentItemCount=parseInt(document.querySelector("#cart-icon-bubble span").innerHTML),document.dispatchEvent(new CustomEvent("eurus:cart:items-changed")),this.productsList=[],this.productsListDraft=[],this.totalPrice=0})).catch((t=>{console.error("Error:",t)})).finally((()=>{this.loading=!1}))},removeItem(e,r){let s=this.productsList[r],i=this.productsList.filter(((t,e)=>e!=r));this.productsList=i,this.productsListDraft=this.productsList,document.dispatchEvent(new CustomEvent(`eurus:product-bundle:remove-item-${t}`,{detail:{item:s,el:e}}))}}))),Alpine.data("xProductItemFBT",((t,e,r,s)=>({qty:1,productList:[],currentVariant:"",showButton:!0,productUrl:r,init(){s&&document.addEventListener(`eurus:product-card-variant-select:updated:${t}`,(t=>{this.currentVariant=t.detail.currentVariant,this.currentVariant&&this.currentVariant.id&&(this.productUrl=r+`/?variant=${this.currentVariant.id}`),this.renderAddButton()})),document.addEventListener(`eurus:product-fbt:productsList-changed-${e}`,(t=>{this.productList=t.detail.productsList,this.renderAddButton()}))},renderAddButton(){const e=JSON.parse(document.getElementById("current-variant-"+t).textContent);let r="object"==typeof e?e.id:e;const s=this.productList.find((({id:t})=>t===r));s?(this.showButton=!1,this.qty=s.quantity):(this.showButton=!0,this.qty=1)},minus(t){this.qty=parseInt(this.qty),1==this.qty?this.qty=1:this.qty-=t},plus(t){this.qty=parseInt(this.qty),this.qty+=t},invalid(t){number=parseFloat(t.value),(!Number.isInteger(number)||number<1)&&(this.qty=1)}})))}))})));
