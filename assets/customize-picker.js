window.Eurus.loadedScript.includes("customize-picker.js")||(window.Eurus.loadedScript.push("customize-picker.js"),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.data("xCustomizePicker",(()=>({dataCheckbox:[],validation(e){""==e.value?e.classList.add("required-picker"):e.classList.remove("required-picker"),this.validateErrorBtn(e)},validateErrorBtn(e){var t=e.closest(".product-info"),r=t.querySelector(".payment-button--clone");t.querySelectorAll(".customization-picker.required-picker").length?r.classList.remove("hidden"):r.classList.add("hidden")},validateError(e){var t=e.closest(".product-info").querySelectorAll(".customization-picker");t.length&&t.forEach((e=>{(e.required&&""==e.value||e.classList.contains("validate-checkbox"))&&e.classList.add("required-picker")}))},validateCheckBox(e,t,r){var o=e.closest(".customize-checkbox");const i=o.querySelectorAll("input[type=checkbox]:checked");if(i.length>=t?e.classList.remove("required-picker","validate-checkbox"):e.classList.add("required-picker","validate-checkbox"),r>0&&r>=t){const e=i.length>=r;o.querySelectorAll("input[type=checkbox]:not(:checked)").forEach((t=>{t.disabled=e}))}t>0&&this.validateErrorBtn(e)},setDragAndDrop(e){const t=e.querySelector(".drop-zone__input"),r=t.closest(".drop-zone-wrap"),o=r.querySelector(".drop-zone");o.addEventListener("click",(e=>{t.click()})),t.addEventListener("change",(e=>{if(t.files.length){const e=t.closest(".drop-zone-wrap"),o=t.files[0],i=(o.size/1024/1024).toFixed(4);if(e.classList.remove("drop-zone-wrap--error"),t.classList.remove("required-picker"),i>5)return t.value="",e.classList.add("drop-zone-wrap--error"),void setTimeout((()=>{e.classList.remove("drop-zone-wrap--error")}),3e3);this.preview(r,o)}})),o.addEventListener("dragover",(e=>{e.preventDefault(),o.classList.add("drop-zone--over")})),["dragleave","dragend"].forEach((e=>{o.addEventListener(e,(e=>{o.classList.remove("drop-zone--over")}))})),o.addEventListener("drop",(e=>{e.preventDefault(),e.dataTransfer.files.length&&(t.files=e.dataTransfer.files,this.preview(r,e.dataTransfer.files[0])),o.classList.remove("drop-zone--over")}))},preview(e,t){const r=new FileReader;r.addEventListener("load",(()=>{let o=e.querySelector(".drop-zone__thumb"),i=e.querySelector(".dd-thumbnail"),s=i.querySelector(".icon-file"),a=e.querySelector(".dd-file-info");e.classList.add("drop-zone-wrap--inactive");const d=a.querySelector(".dd-file-info__title"),n=t.name.substring(0,t.name.lastIndexOf("."))||t.name;d.textContent=n;a.querySelector(".dd-file-info__type").textContent=`${this.formatFileType(t)} â€¢ ${this.calculateSize(t)}`,i.removeAttribute("style"),s.classList.add("hidden"),/\.(jpe?g|png|gif|webp)$/i.test(t.name)?i.setAttribute("style",`background-image:url("${r.result}");`):s.classList.remove("hidden"),o.setAttribute("data-ts-file",t.name)}),!1),r.readAsDataURL(t)},removeFile(e,t){e.preventDefault();const r=t.closest(".drop-zone-wrap");r.querySelector(".drop-zone__input").value="",r.classList.remove("drop-zone-wrap--inactive")},formatFileType(e){const t=e.type,r=t.split("/"),o=r[1];let i=o,s=o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-$/,"").replace(/^-/,"");const a={pdf:o.toUpperCase(),"vnd-ms-excel":"Excel","vnd-openxmlformats-officedocument-spreadsheetml-sheet":"Excel","vnd-ms-powerpoint":"PowerPoint","vnd-openxmlformats-officedocument-presentationml-presentation":"PowerPoint","x-msvideo":"AVI",html:"HTML",msword:"Word","vnd-openxmlformats-officedocument-wordprocessingml-document":"Word",csv:"CSV",mpeg:"MP3 Audio",webm:"WEBM Audio","mp4-video":"MP4 Video","mpeg-video":"MPEG Video","webm-video":"WEBM Video","vnd-rar":"RAR archive",rtf:"RTF",plain:"Text",wav:"WAV","vnd-adobe-photoshop":"Adobe Photoshop",postscript:"Adobe Illustrator"};if(t.startsWith("image/"))a[s]?i=a[s]:(i=r[1].toUpperCase(),i=`${i} Image`);else if(t.startsWith("video/")){const e=`${s}-video`;a[e]&&(i=a[e])}else a[s]&&(i=a[s]);return i},calculateSize(e){let t=e.size;if(0===t)return 0;const r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.min(Math.floor(Math.log(t)/Math.log(1024)),r.length-1);return 0===o?`${t} bytes`:`${(t/1024**o).toFixed(2)} ${r[o]}`}})))}))})));
