window.Eurus.loadedScript.includes("popup.js")||(window.Eurus.loadedScript.push("popup.js"),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.data("xPopups",(e=>({enable:!1,showMinimal:!1,show:!!Shopify.designMode&&(!localStorage.getItem(e.name+"-"+e.sectionId)||xParseJSON(localStorage.getItem(e.name+"-"+e.sectionId))),delayDays:e.delayDays?e.delayDays:0,t:"",copySuccess:!1,init(){if(Shopify.designMode){var i=this;const o=(o,t=null)=>{o.detail&&o.detail.sectionId.includes(e.sectionId)||t?window.Alpine?(i.open(),localStorage.setItem(e.name+"-"+e.sectionId,JSON.stringify(!0))):document.addEventListener("alpine:initialized",(()=>{i.open(),localStorage.setItem(e.name+"-"+e.sectionId,JSON.stringify(!0))})):window.Alpine?(i.closeSection(),localStorage.setItem(e.name+"-"+e.sectionId,JSON.stringify(!1))):document.addEventListener("alpine:initialized",(()=>{i.closeSection(),localStorage.setItem(e.name+"-"+e.sectionId,JSON.stringify(!1))}))};document.addEventListener("shopify:section:select",(e=>{o(e)})),document.addEventListener("shopify:block:select",(e=>{o(e)})),"popup-age-verification"!=e.name&&window.addEventListener("resize",(i=>{o(i,xParseJSON(localStorage.getItem(e.name+"-"+e.sectionId)))}))}this.$el.querySelector(".newsletter-message")&&this.open()},load(){if("/challenge"===window.location.pathname)return;const i=this;if(Shopify.designMode)i.open();else{if("popup-promotion"==e.name&&!this.handleSchedule()&&e.showCountdown)return;if("popup-promotion"==e.name&&document.querySelector("#x-age-popup")&&null==xParseJSON(localStorage.getItem("popup-age-verification")))return void document.addEventListener("close-age-verification",(()=>{setTimeout((()=>{i.open()}),1e3*e.delays)}));setTimeout((()=>{i.open()}),1e3*e.delays)}},open(){if(Shopify.designMode||!this.isExpireSave()||this.show){var i=this;if("popup-age-verification"==e.name){if(this.isExpireSave()&&!Shopify.designMode&&!e.show_popup)return;requestAnimationFrame((()=>{document.body.classList.add("overflow-hidden"),Alpine.store("xPopup").open=!0}))}e.showMinimal&&"minimal"==e.default_style&&window.innerWidth>=768||e.showMinimalMobile&&"minimal"==e.default_style_mobile&&window.innerWidth<768?(i.showMinimal=!0,i.show=!1,Shopify.designMode&&(localStorage.setItem(e.name+"-"+e.sectionId,JSON.stringify(!1)),i.removeOverlay())):e.showOnMobile&&window.innerWidth<768||window.innerWidth>=768?"minimal"==localStorage.getItem("current-"+e.sectionId)?(i.showMinimal=!0,i.show=!1,i.removeOverlay()):(i.show=!0,i.showMinimal=!1,i.setOverlay(),Shopify.designMode||i.saveDisplayedPopup()):i.removeOverlay()}},close(){"popup-age-verification"==e.name&&(requestAnimationFrame((()=>{document.body.classList.remove("overflow-hidden"),Alpine.store("xPopup").open=!1})),document.dispatchEvent(new Event("close-age-verification")));var i=this;Shopify.designMode?requestAnimationFrame((()=>{setTimeout((()=>{i.showMinimal=!0}),300)})):(this.removeDisplayedPopup(),e.showMinimal&&window.innerWidth>=768||e.showMinimalMobile&&window.innerWidth<768?requestAnimationFrame((()=>{setTimeout((()=>{i.showMinimal=!0}),300),localStorage.setItem("current-"+e.sectionId,"minimal")})):this.isExpireSave()||this.setExpire()),requestAnimationFrame((()=>{setTimeout((()=>{i.show=!1,i.removeOverlay()}),300)}))},closeSection(){this.show=!1,this.showMinimal=!1,this.removeOverlay()},setExpire(){const i={section:e.sectionId,expires:Date.now()+24*this.delayDays*60*60*1e3};localStorage.setItem(e.sectionId,JSON.stringify(i)),localStorage.removeItem("current-"+e.sectionId)},isExpireSave(){const i=xParseJSON(localStorage.getItem(e.sectionId));return null!=i&&(!(Date.now()>i.expires)||(localStorage.removeItem(e.sectionId),!1))},handleSchedule(){if(e.showCountdown){let i=document.getElementById("x-promotion-"+e.sectionId),o=xParseJSON(i.getAttribute("x-countdown-data"));if(!Alpine.store("xHelper").canShow(o)&&!Shopify.designMode&&e.schedule_enabled)return requestAnimationFrame((()=>{this.show=!1})),!1}return this.enable=!0,!0},clickMinimal(){requestAnimationFrame((()=>{this.show=!0,this.showMinimal=!1,Shopify.designMode||this.saveDisplayedPopup(),this.setOverlay()}))},setOverlay(){let i=document.querySelector("#eurus-popup");i.classList.contains("bg-[#acacac]")||e.overlay&&(i.className+=" bg-[#acacac] bg-opacity-30")},removeOverlay(){let e=document.querySelector("#eurus-popup");displayedPopups=xParseJSON(localStorage.getItem("promotion-popup"))||[],e.classList.contains("bg-[#acacac]")&&0==displayedPopups.length&&e.classList.remove("bg-[#acacac]","bg-opacity-30")},closeMinimal(){this.showMinimal=!1,Shopify.designMode||this.isExpireSave()||this.setExpire()},saveDisplayedPopup(){let i=xParseJSON(localStorage.getItem("promotion-popup"))||[];i.some((i=>i==e.name+"-"+e.sectionId))||(i.push(e.name+"-"+e.sectionId),localStorage.setItem("promotion-popup",JSON.stringify(i)))},removeDisplayedPopup(){let i=xParseJSON(localStorage.getItem("promotion-popup")).filter((i=>i!=e.name+"-"+e.sectionId));localStorage.setItem("promotion-popup",JSON.stringify(i))}})))}))})));
