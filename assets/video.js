window.Eurus.loadedScript.includes("video.js")||(window.Eurus.loadedScript.push("video.js"),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.store("xVideo",{ytIframeId:0,vimeoIframeId:0,externalListened:!1,play(e){let t=e.getElementsByClassName("video")[0];!t&&e.closest(".contain-video")&&(t=e.closest(".contain-video").getElementsByClassName("video")[0]),t&&("IFRAME"==t.tagName?this.externalPostCommand(t,"play"):"VIDEO"==t.tagName&&t.play())},pause(e){let t=e.getElementsByClassName("video")[0];!t&&e.closest(".contain-video")&&(t=e.closest(".contain-video").getElementsByClassName("video")[0]),t&&("IFRAME"==t.tagName?this.externalPostCommand(t,"pause"):"VIDEO"==t.tagName&&t.pause())},mp4Thumbnail(e){const t=e.closest(".external-video"),i=t.getElementsByClassName("img-thumbnail")[0],a=t.getElementsByClassName("button-play")[0],n=t.getElementsByClassName("video")[0];i&&i.classList.add("hidden"),a&&a.classList.add("hidden"),n&&n.setAttribute("controls",""),this.play(t)},externalLoad(e,t,i,a,n,o=1){let s="",l="";s="youtube"==t?`https://www.youtube.com/embed/${i}?mute=1&playlist=${i}&autoplay=1&playsinline=1&enablejsapi=1&modestbranding=1&rel=0&controls=${o}&showinfo=${o}`:`https://player.vimeo.com/video/${i}?muted=1&autoplay=1&playsinline=1&api=1&controls=${o}`,0==o&&(l=" pointer-events-none"),requestAnimationFrame((()=>{const i=e.closest(".external-video");i.innerHTML=`<iframe data-video-loop="${a}" class="iframe-video absolute w-full h-full video top-1/2 -translate-y-1/2 ${l}"\n              frameborder="0" host="${t}" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen playsinline\n              src="${s}" title="${n}"></iframe>`,i.querySelector(".iframe-video").addEventListener("load",(()=>{setTimeout((()=>{this.play(i),"youtube"==t?(this.ytIframeId++,i.querySelector(".iframe-video").contentWindow.postMessage(JSON.stringify({event:"listening",id:this.ytIframeId,channel:"widget"}),"*")):(this.vimeoIframeId++,i.querySelector(".iframe-video").contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"finish"}),"*"))}),100)}))})),this.externalListen()},renderVimeoFacade(e,t,i){fetch(`https://vimeo.com/api/oembed.json?url=https://vimeo.com/${t}&width=${i.width}`).then((e=>e.json())).then((t=>{const a=`\n                <picture>\n                  <img src="${t.thumbnail_url}" loading="lazy" class="w-full h-full object-cover" alt="${i.alt}" width="${t.width}" height="${t.height}"/>\n                </picture>\n              `;requestAnimationFrame((()=>{e.innerHTML=a}))}))},externalListen(){this.externalListened||(window.addEventListener("message",(e=>{var t=document.getElementsByTagName("IFRAME");for(let i,a,n,o=0;o<t.length;o++)i=t[o],"true"===i.getAttribute("data-video-loop")&&(a=i.contentWindow||i.contentDocument.defaultView,a===e.source&&("https://www.youtube.com"==e.origin&&(n=JSON.parse(e.data),n.info&&0==n.info.playerState&&this.play(i.parentNode)),"https://player.vimeo.com"==e.origin&&(n=JSON.parse(e.data),"finish"==n.event&&this.play(i.parentNode))))})),this.externalListened=!0)},externalPostCommand(e,t){const i="youtube"==e.getAttribute("host")?{event:"command",func:t+"Video"}:{method:t,value:"true"};e.contentWindow.postMessage(JSON.stringify(i),"*")}})}))})));
