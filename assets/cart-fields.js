window.Eurus.loadedScript.includes("cart-fields.js")||(window.Eurus.loadedScript.push("cart-fields.js"),requestAnimationFrame((()=>{document.addEventListener("alpine:init",(()=>{Alpine.data("xCartFields",(()=>({custom_field:"",custom_field_label:"",custom_field_required:!1,custom_field_error:!1,openField:!1,t:"",loadData(){const t=xParseJSON(this.$el.getAttribute("x-cart-fields-data"));this.custom_field=localStorage.cart_custom_field?localStorage.cart_custom_field:"",this.custom_field_label=t.custom_field_label,this.custom_field_required=t.custom_field_required,this.custom_field_pattern=new RegExp(t.custom_field_pattern),this.save(),this.$watch("custom_field",(()=>{this.save()})),document.addEventListener("eurus:cart:validate",(()=>{this.custom_field=localStorage.cart_custom_field?localStorage.cart_custom_field:"",this.custom_field_required&&(!this.custom_field||0==this.custom_field.length)||this.custom_field&&!this.custom_field.match(this.custom_field_pattern)?(this.custom_field_error=!0,Alpine.store("xCartHelper").openField="custom_field",Alpine.store("xCartHelper").validated=!1):this.custom_field_error=!1}))},save(){clearTimeout(this.t);const t=()=>{var t={attributes:{}};t.attributes[this.custom_field_label]=this.custom_field,Alpine.store("xCartHelper").updateCart(t,!0),localStorage.cart_custom_field=this.custom_field};this.t=setTimeout((()=>{t()}),200)}})))}))})));
